<!DOCTYPE html>
<html>
<head>
<link href='https://fonts.googleapis.com/css?family=Fugaz+One' rel='stylesheet' type='text/css'>
<style>
html, body {
  height: 100%;
  margin: 0;
  overflow: hidden;
}

.scene {
  height: 200vh;
}

.parallax {
  background-size: cover;
  box-sizing: border-box;
  position: absolute;
  width: 100%;
  height: 130vh;
  margin-bottom: -130vh;
}

.header {
  height: 30vh;
}
.parallax.header {
  margin-bottom: -30vh;
}

.spacer {
  height: 500px;
}

p {
  font-family: 'Fugaz One', cursive;
  color: white;
  margin: 0;
  z-index: 1;
  position: relative;
}

.viewport {
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  position: relative;
  -webkit-overflow-scrolling: touch;
}

#v1, #v2 {
  width: 50%;
  position: absolute;
}

#v1 {
  left: 0;
}

#v2 {
  right: 0;
}

.black {
  background-color: black;
  z-index: 1;
  position: relative;
}

.parallax {
  border: 5px solid orange;
}

</style>
<script src="parallax.js"></script>
<script>

function fakeSticky(clip) {
  // Fake sticky within this scroller.
  // First, change all elements which should be sticky to be relative.
  var parallax = clip.querySelectorAll('*[parallax]');

  // Detect if sticky was supported and abort.
  if (parallax.length == 0 ||
      getComputedStyle(parallax[0]) == '-webkit-sticky' ||
      getComputedStyle(parallax[0]) == 'sticky') {
    return;
  }

  for (var i = 0; i < parallax.length; i++) {
    parallax[i].initialTop = parallax[i].offsetTop;
    parallax[i].style.position = 'relative';
  }

  function onscroll() {
    for (var i = 0; i < parallax.length; i++) {
      parallax[i].style.top = Math.max(0, clip.scrollTop - parallax[i].initialTop) + 'px';
    }
  };

  clip.addEventListener('scroll', onscroll);
}

function test(clip) {
  var parallax = clip.querySelectorAll('*[parallax]');
}

document.addEventListener('DOMContentLoaded', function() {
  initializeParallax(v1, false);
  initializeParallax(v2, true);
  fakeSticky(v2);
  test(v1);
  test(v2);
});
</script>
</head>
<body>
  <div class="viewport" id="v1">
    <div>
      <div class="parallax header" style="background-image: url('img/header-park.jpg');" parallax="0.3"></div>
      <div class="scene header">
        <p>
          Bacon ipsum dolor amet ham pastrami tri-tip, ham hock cupim t-bone chicken kevin ribeye beef brisket filet mignon leberkas pig. Drumstick kielbasa filet mignon picanha bresaola chuck tail swine porchetta hamburger salami alcatra beef ribs. Prosciutto meatloaf chuck, tri-tip kevin salami beef jowl sausage tail flank. Fatback pork belly swine spare ribs short ribs bresaola turducken beef jowl jerky pig.
        </p>
      </div>
      <div class="scene black" parallax-cover>
        <p>
          Shank turkey rump short loin sausage. Short ribs beef ribs pastrami capicola cupim t-bone. Short ribs kevin ball tip picanha beef ribs biltong tail, pork turkey landjaeger rump. Boudin hamburger bacon ham hock beef ribs ribeye prosciutto fatback chicken meatloaf flank ground round pancetta kielbasa. Short ribs meatloaf t-bone pig shank. Porchetta pork loin tongue tri-tip landjaeger cow, bacon t-bone flank sirloin drumstick turducken venison.
        </p>
      </div>
      <div class="parallax" style="background-image: url('img/droid.jpg');" parallax></div>
      <div class="scene">
        <p>
          Shank turkey rump short loin sausage. Short ribs beef ribs pastrami capicola cupim t-bone. Short ribs kevin ball tip picanha beef ribs biltong tail, pork turkey landjaeger rump. Boudin hamburger bacon ham hock beef ribs ribeye prosciutto fatback chicken meatloaf flank ground round pancetta kielbasa. Short ribs meatloaf t-bone pig shank. Porchetta pork loin tongue tri-tip landjaeger cow, bacon t-bone flank sirloin drumstick turducken venison.
        </p>
      </div>
      <div class="scene black" parallax-cover>
        <p>
          Shank turkey rump short loin sausage. Short ribs beef ribs pastrami capicola cupim t-bone. Short ribs kevin ball tip picanha beef ribs biltong tail, pork turkey landjaeger rump. Boudin hamburger bacon ham hock beef ribs ribeye prosciutto fatback chicken meatloaf flank ground round pancetta kielbasa. Short ribs meatloaf t-bone pig shank. Porchetta pork loin tongue tri-tip landjaeger cow, bacon t-bone flank sirloin drumstick turducken venison.
        </p>
      </div>
      <div class="parallax" style="background-image: url('img/desk.jpg');" parallax></div>
      <div class="scene">
        <p>
          Bacon ipsum dolor amet ham pastrami tri-tip, ham hock cupim t-bone chicken kevin ribeye beef brisket filet mignon leberkas pig. Drumstick kielbasa filet mignon picanha bresaola chuck tail swine porchetta hamburger salami alcatra beef ribs. Prosciutto meatloaf chuck, tri-tip kevin salami beef jowl sausage tail flank. Fatback pork belly swine spare ribs short ribs bresaola turducken beef jowl jerky pig.
        </p>
      </div>
    </div>
  </div>
  <div class="viewport" id="v2">
    <div>
      <div class="parallax header" style="background-image: url('img/header-park.jpg');" parallax="0.3"></div>
      <div class="scene header">
        <p>
          Bacon ipsum dolor amet ham pastrami tri-tip, ham hock cupim t-bone chicken kevin ribeye beef brisket filet mignon leberkas pig. Drumstick kielbasa filet mignon picanha bresaola chuck tail swine porchetta hamburger salami alcatra beef ribs. Prosciutto meatloaf chuck, tri-tip kevin salami beef jowl sausage tail flank. Fatback pork belly swine spare ribs short ribs bresaola turducken beef jowl jerky pig.
        </p>
      </div>
      <div class="scene black" parallax-cover>
        <p>
          Shank turkey rump short loin sausage. Short ribs beef ribs pastrami capicola cupim t-bone. Short ribs kevin ball tip picanha beef ribs biltong tail, pork turkey landjaeger rump. Boudin hamburger bacon ham hock beef ribs ribeye prosciutto fatback chicken meatloaf flank ground round pancetta kielbasa. Short ribs meatloaf t-bone pig shank. Porchetta pork loin tongue tri-tip landjaeger cow, bacon t-bone flank sirloin drumstick turducken venison.
        </p>
      </div>
      <div class="parallax" style="background-image: url('img/droid.jpg');" parallax></div>
      <div class="scene">
        <p>
          Shank turkey rump short loin sausage. Short ribs beef ribs pastrami capicola cupim t-bone. Short ribs kevin ball tip picanha beef ribs biltong tail, pork turkey landjaeger rump. Boudin hamburger bacon ham hock beef ribs ribeye prosciutto fatback chicken meatloaf flank ground round pancetta kielbasa. Short ribs meatloaf t-bone pig shank. Porchetta pork loin tongue tri-tip landjaeger cow, bacon t-bone flank sirloin drumstick turducken venison.
        </p>
      </div>
      <div class="scene black" parallax-cover>
        <p>
          Shank turkey rump short loin sausage. Short ribs beef ribs pastrami capicola cupim t-bone. Short ribs kevin ball tip picanha beef ribs biltong tail, pork turkey landjaeger rump. Boudin hamburger bacon ham hock beef ribs ribeye prosciutto fatback chicken meatloaf flank ground round pancetta kielbasa. Short ribs meatloaf t-bone pig shank. Porchetta pork loin tongue tri-tip landjaeger cow, bacon t-bone flank sirloin drumstick turducken venison.
        </p>
      </div>
      <div class="parallax" style="background-image: url('img/desk.jpg');" parallax></div>
      <div class="scene">
        <p>
          Bacon ipsum dolor amet ham pastrami tri-tip, ham hock cupim t-bone chicken kevin ribeye beef brisket filet mignon leberkas pig. Drumstick kielbasa filet mignon picanha bresaola chuck tail swine porchetta hamburger salami alcatra beef ribs. Prosciutto meatloaf chuck, tri-tip kevin salami beef jowl sausage tail flank. Fatback pork belly swine spare ribs short ribs bresaola turducken beef jowl jerky pig.
        </p>
      </div>
    </div>
  </div>
</body>
</html>